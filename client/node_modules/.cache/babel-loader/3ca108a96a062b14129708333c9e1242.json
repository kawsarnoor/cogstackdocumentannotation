{"remainingRequest":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/babel-loader/lib/index.js!/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/store/auth.js","dependencies":[{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/store/auth.js","mtime":1607050122022},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKLyplc2xpbnQtZGlzYWJsZSovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vc3JjL3JvdXRlcic7CnZhciByb290X2FwaSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMOwp2YXIgc3RhdGUgPSB7CiAgLy8gc2luZ2xlIHNvdXJjZSBvZiBkYXRhCiAgdXNlcjoge30sCiAgand0OiAnJywKICBmb3JjZVJlZnJlc2g6ICcnCn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBsb2dpbkRldGFpbHMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IGxvZ2luRGV0YWlsc1sndXNlcm5hbWUnXTsKICAgIHZhciBwYXNzd29yZCA9IGxvZ2luRGV0YWlsc1sncGFzc3dvcmQnXTsKICAgIGNvbnNvbGUubG9nKHJvb3RfYXBpKTsKICAgIHZhciBwYXRoID0gJ2h0dHA6Ly8nICsgcm9vdF9hcGkgKyAnOjUwMDEvbG9naW4nOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXhpb3MucG9zdChwYXRoLCB7CiAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsCiAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29tbWl0KCdhdXRoVXNlcicsIHsKICAgICAgICAgIHVzZXI6IHVzZXJuYW1lLAogICAgICAgICAgand0OiByZXMuZGF0YS50b2tlbgogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNmdWxseSBsb2dnZWQgaW4uLi4nKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0JywgcmVzLmRhdGEudG9rZW4pOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgdXNlcm5hbWUpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JjZVJlZnJlc2gnLCAncmVmcmVzaCcpOwogICAgICAgIHJlc29sdmUoewogICAgICAgICAgJ3Jlc3VsdCc6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygnZmFpbGVkIGxvZyBpbi4uLicpOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgcmVmcmVzaHRva2VuOiBmdW5jdGlvbiByZWZyZXNodG9rZW4oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0Jyk7CiAgICB2YXIgcGF0aCA9ICdodHRwOi8vJyArIHJvb3RfYXBpICsgKyc6NTAwMS9yZWZyZXNodG9rZW4nOwogICAgYXhpb3MucG9zdChwYXRoLCB7CiAgICAgICd1c2VyJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKQogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JykKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbW1pdCgnYXV0aFVzZXInLCB7CiAgICAgICAgdXNlcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSwKICAgICAgICBqd3Q6IHJlcy5kYXRhLnRva2VuCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygnc3VjY2VzZnVsbHkgcmVmcmVzaGVkIHRva2VuLi4uJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd3QnLCByZXMuZGF0YS50b2tlbik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsvLyAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7IAogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIGNvbW1pdCgnY2xlYXJBdXRoRGF0YScpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdqd3QnKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JjZVJlZnJlc2gnLCAnJyk7CiAgICByb3V0ZXIucmVwbGFjZSgnbG9naW4nKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgYXV0aFVzZXI6IGZ1bmN0aW9uIGF1dGhVc2VyKHN0YXRlLCB1c2VyRGF0YSkgewogICAgc3RhdGUudXNlciA9IHVzZXJEYXRhLnVzZXJuYW1lOwogICAgc3RhdGUuand0ID0gdXNlckRhdGEudG9rZW47CiAgICBzdGF0ZS5mb3JjZVJlZnJlc2ggPSBmYWxzZTsKICB9LAogIGNsZWFyQXV0aERhdGE6IGZ1bmN0aW9uIGNsZWFyQXV0aERhdGEoc3RhdGUpIHsKICAgIHN0YXRlLnVzZXIgPSB7fTsKICAgIHN0YXRlLmp3dCA9ICcnOwogICAgc3RhdGUuZm9yY2VSZWZyZXNoID0gdHJ1ZTsKICB9Cn07CnZhciBnZXR0ZXJzID0gewogIC8vIHJldXNhYmxlIGRhdGEgYWNjZXNzb3JzCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JykpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9IC8vICAgcmV0dXJuIGlzVmFsaWRKd3Qoc3RhdGUuand0LnRva2VuKQoKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/store/auth.js"],"names":["axios","router","root_api","process","env","VUE_APP_URL","state","user","jwt","forceRefresh","actions","login","loginDetails","commit","username","password","console","log","path","Promise","resolve","reject","post","then","res","data","token","localStorage","setItem","catch","error","refreshtoken","getItem","headers","logout","removeItem","replace","mutations","authUser","userData","clearAuthData","getters","isAuthenticated","namespaced"],"mappings":"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","sourcesContent":["/*eslint-disable*/\n\nimport axios from 'axios';\nimport router from '../src/router'\n\nconst root_api = process.env.VUE_APP_URL\n\nconst state = {\n    // single source of data\n    user: {},\n\tjwt: '',\n\tforceRefresh: '',\n};\n\nconst actions = {\n    login: ({commit}, loginDetails) => {\n        var username = loginDetails['username']\n        var password = loginDetails['password'] \n\t\tconsole.log(root_api);\n        const path = 'http://' + root_api +  ':5001/login';\n\n        return new Promise((resolve, reject) => {\n\t\t\taxios.post(path, {'username':username, 'password':password})\n\t\t\t\t.then(res => {\n\t\t\t\tcommit('authUser', { user: username, jwt: res.data.token });\t\n\t\t\t\tconsole.log('succesfully logged in...');\n\n\t\t\t\tlocalStorage.setItem('jwt', res.data.token);\n\t\t\t\tlocalStorage.setItem('user', username);\n\t\t\t\tlocalStorage.setItem('forceRefresh', 'refresh');\n\n\t\t\t\tresolve({'result': 'success'})\n\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log('failed log in...');\n\t\t\t\tconsole.log(error);\n\t\t\t\treject(error);\n            });  \n        })\n \n\t},\n\t\n\trefreshtoken: ({commit}) => {\n\t\tlet token = localStorage.getItem('jwt');\n\t\tconst path = 'http://' + root_api +  + ':5001/refreshtoken';\n\t\t\n        axios.post(path, {'user': localStorage.getItem('user')}, {headers: {'Authorization': localStorage.getItem('jwt')}})\n            .then(res => {\n\t\t\t  commit('authUser', { user: localStorage.getItem('user'), jwt: res.data.token });\t\n              console.log('succesfully refreshed token...');\n\n\t\t\t  localStorage.setItem('jwt', res.data.token);\n\t\t\t  localStorage.setItem('user', localStorage.getItem('user'));\n            })\n            .catch((error) => {\n\t\t\t//    router.push('/login'); \n            });\n\t},\n\n\tlogout: ({commit}) => {\n\t\tcommit('clearAuthData');\n\t\tlocalStorage.removeItem('user');\n\t\tlocalStorage.removeItem('jwt');\n\t\tlocalStorage.setItem('forceRefresh', '');\n\t\trouter.replace('login');\n\t},\n};\n\nconst mutations = {\n\tauthUser(state, userData) {\n\t\tstate.user = userData.username;\n\t\tstate.jwt = userData.token;\n\t\tstate.forceRefresh = false;\n\t},\n\tclearAuthData(state) {\n\t\tstate.user = {};\n\t\tstate.jwt = '';\n\t\tstate.forceRefresh = true;\n\t},\n};\n\nconst getters = {\n    // reusable data accessors\n    isAuthenticated (state) {\n\t  if (localStorage.getItem('jwt')){\n          return true;\n\t  } else {\n\t\t  return false;\n\t  }\n    //   return isValidJwt(state.jwt.token)\n    }\n};\n\nexport default {\n\tnamespaced: true,\n\tstate,\n\tmutations,\n\tgetters,\n\tactions,\n}\n\n"]}]}