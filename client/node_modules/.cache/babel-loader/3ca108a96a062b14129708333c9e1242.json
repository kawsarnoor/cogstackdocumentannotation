{"remainingRequest":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/babel-loader/lib/index.js!/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/store/auth.js","dependencies":[{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/store/auth.js","mtime":1612050004664},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKLyplc2xpbnQtZGlzYWJsZSovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vc3JjL3JvdXRlcic7CnZhciByb290X2FwaSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMOwp2YXIgc3RhdGUgPSB7CiAgLy8gc2luZ2xlIHNvdXJjZSBvZiBkYXRhCiAgdXNlcjoge30sCiAgand0OiAnJywKICBmb3JjZVJlZnJlc2g6ICcnCn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBsb2dpbkRldGFpbHMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IGxvZ2luRGV0YWlsc1sndXNlcm5hbWUnXTsKICAgIHZhciBwYXNzd29yZCA9IGxvZ2luRGV0YWlsc1sncGFzc3dvcmQnXTsKICAgIGNvbnNvbGUubG9nKHJvb3RfYXBpKTsKICAgIHZhciBwYXRoID0gJ2h0dHA6Ly8nICsgcm9vdF9hcGkgKyAnOjUwMDEvbG9naW4nOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXhpb3MucG9zdChwYXRoLCB7CiAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsCiAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29tbWl0KCdhdXRoVXNlcicsIHsKICAgICAgICAgIHVzZXI6IHVzZXJuYW1lLAogICAgICAgICAgand0OiByZXMuZGF0YS50b2tlbgogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNmdWxseSBsb2dnZWQgaW4uLi4nKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0JywgcmVzLmRhdGEudG9rZW4pOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc0FkbWluJywgcmVzLmRhdGEuaXNBZG1pbik7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCB1c2VybmFtZSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZvcmNlUmVmcmVzaCcsICdyZWZyZXNoJyk7CiAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAncmVzdWx0JzogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCdmYWlsZWQgbG9nIGluLi4uJyk7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICByZWZyZXNodG9rZW46IGZ1bmN0aW9uIHJlZnJlc2h0b2tlbihfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKTsKICAgIHZhciBwYXRoID0gJ2h0dHA6Ly8nICsgcm9vdF9hcGkgKyAnOjUwMDEvcmVmcmVzaHRva2VuJzsKICAgIGF4aW9zLnBvc3QocGF0aCwgewogICAgICAndXNlcic6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykKICAgIH0sIHsKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb21taXQoJ2F1dGhVc2VyJywgewogICAgICAgIHVzZXI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJyksCiAgICAgICAgand0OiByZXMuZGF0YS50b2tlbgogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc2Z1bGx5IHJlZnJlc2hlZCB0b2tlbi4uLicpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0JywgcmVzLmRhdGEudG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7Ly8gICAgcm91dGVyLnB1c2goJy9sb2dpbicpOyAKICAgIH0pOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICBjb21taXQoJ2NsZWFyQXV0aERhdGEnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnand0Jyk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZm9yY2VSZWZyZXNoJywgJycpOwogICAgcm91dGVyLnJlcGxhY2UoJ2xvZ2luJyk7CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIGF1dGhVc2VyOiBmdW5jdGlvbiBhdXRoVXNlcihzdGF0ZSwgdXNlckRhdGEpIHsKICAgIHN0YXRlLnVzZXIgPSB1c2VyRGF0YS51c2VybmFtZTsKICAgIHN0YXRlLmp3dCA9IHVzZXJEYXRhLnRva2VuOwogICAgc3RhdGUuZm9yY2VSZWZyZXNoID0gZmFsc2U7CiAgfSwKICBjbGVhckF1dGhEYXRhOiBmdW5jdGlvbiBjbGVhckF1dGhEYXRhKHN0YXRlKSB7CiAgICBzdGF0ZS51c2VyID0ge307CiAgICBzdGF0ZS5qd3QgPSAnJzsKICAgIHN0YXRlLmZvcmNlUmVmcmVzaCA9IHRydWU7CiAgfQp9Owp2YXIgZ2V0dGVycyA9IHsKICAvLyByZXVzYWJsZSBkYXRhIGFjY2Vzc29ycwogIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSAvLyAgIHJldHVybiBpc1ZhbGlkSnd0KHN0YXRlLmp3dC50b2tlbikKCiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/store/auth.js"],"names":["axios","router","root_api","process","env","VUE_APP_URL","state","user","jwt","forceRefresh","actions","login","loginDetails","commit","username","password","console","log","path","Promise","resolve","reject","post","then","res","data","token","localStorage","setItem","isAdmin","catch","error","refreshtoken","getItem","headers","logout","removeItem","replace","mutations","authUser","userData","clearAuthData","getters","isAuthenticated","namespaced"],"mappings":"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","sourcesContent":["/*eslint-disable*/\n\nimport axios from 'axios';\nimport router from '../src/router'\n\nconst root_api = process.env.VUE_APP_URL\n\nconst state = {\n    // single source of data\n    user: {},\n\tjwt: '',\n\tforceRefresh: '',\n};\n\nconst actions = {\n    login: ({commit}, loginDetails) => {\n        var username = loginDetails['username']\n        var password = loginDetails['password'] \n\t\tconsole.log(root_api);\n        const path = 'http://' + root_api +  ':5001/login';\n\n        return new Promise((resolve, reject) => {\n\t\t\taxios.post(path, {'username':username, 'password':password})\n\t\t\t\t.then(res => {\n\t\t\t\tcommit('authUser', { user: username, jwt: res.data.token });\t\n\t\t\t\tconsole.log('succesfully logged in...');\n\n\t\t\t\tlocalStorage.setItem('jwt', res.data.token);\n\t\t\t\tlocalStorage.setItem('isAdmin', res.data.isAdmin);\n\t\t\t\tlocalStorage.setItem('user', username);\n\t\t\t\tlocalStorage.setItem('forceRefresh', 'refresh');\n\n\t\t\t\tresolve({'result': 'success'})\n\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log('failed log in...');\n\t\t\t\tconsole.log(error);\n\t\t\t\treject(error);\n            });  \n        })\n \n\t},\n\t\n\trefreshtoken: ({commit}) => {\n\t\tlet token = localStorage.getItem('jwt');\n\t\tconst path = 'http://' + root_api + ':5001/refreshtoken';\n\t\t\n        axios.post(path, {'user': localStorage.getItem('user')}, {headers: {'Authorization': localStorage.getItem('jwt')}})\n            .then(res => {\n\t\t\t  commit('authUser', { user: localStorage.getItem('user'), jwt: res.data.token });\t\n              console.log('succesfully refreshed token...');\n\n\t\t\t  localStorage.setItem('jwt', res.data.token);\n\t\t\t  localStorage.setItem('user', localStorage.getItem('user'));\n            })\n            .catch((error) => {\n\t\t\t//    router.push('/login'); \n            });\n\t},\n\n\tlogout: ({commit}) => {\n\t\tcommit('clearAuthData');\n\t\tlocalStorage.removeItem('user');\n\t\tlocalStorage.removeItem('jwt');\n\t\tlocalStorage.setItem('forceRefresh', '');\n\t\trouter.replace('login');\n\t},\n};\n\nconst mutations = {\n\tauthUser(state, userData) {\n\t\tstate.user = userData.username;\n\t\tstate.jwt = userData.token;\n\t\tstate.forceRefresh = false;\n\t},\n\tclearAuthData(state) {\n\t\tstate.user = {};\n\t\tstate.jwt = '';\n\t\tstate.forceRefresh = true;\n\t},\n};\n\nconst getters = {\n    // reusable data accessors\n    isAuthenticated (state) {\n\t  if (localStorage.getItem('jwt')){\n          return true;\n\t  } else {\n\t\t  return false;\n\t  }\n    //   return isValidJwt(state.jwt.token)\n    }\n};\n\nexport default {\n\tnamespaced: true,\n\tstate,\n\tmutations,\n\tgetters,\n\tactions,\n}\n\n"]}]}