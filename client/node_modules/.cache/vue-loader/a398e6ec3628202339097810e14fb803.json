{"remainingRequest":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/src/components/Document.vue?vue&type=style&index=0&id=5ffe286a&scoped=true&lang=css&","dependencies":[{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/src/components/Document.vue","mtime":1606868506726},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/annotationtool/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmlucHV0IHsKICBtYXJnaW46IDNweDsKfQpoMyB7CiAgbWFyZ2luOiAwcHggMCAwOwp9CnVsIHsKICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7CiAgcGFkZGluZzogMDsKfQpsaSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG1hcmdpbjogMCAxMHB4Owp9CmEgewogIGNvbG9yOiAjNDJiOTgzOwp9Ci5jYXRlZ29yeSB7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBtYXJnaW4tdG9wOiAxNXB4Owp9Ci5vdmVyZmxvd0F1dG8gewogIG92ZXJmbG93LXk6IGF1dG87CiAgaGVpZ2h0OiA3NXZoOwogIHdvcmQtd3JhcDogYnJlYWstd29yZDsKfQouZG9jdW1lbnQgewogIG1hcmdpbjogMTVweDsKfQouYnRuLWdyb3VwIHsKICBtYXJnaW46IDVweDsKfQpkaXYuYm94d3JhcCBkaXYgewogIGZsb2F0OiBsZWZ0Owp9CmRpdi5ib3h3cmFwIGRpdjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogYXF1YTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KZGl2LmJveHdyYXAgZGl2IGg1IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KcHJlIHsKICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgd29yZC1icmVhazoga2VlcC1hbGwKfQo="},{"version":3,"sources":["Document.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Document.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<!-- eslint-disable max-len -->\n  <div class=\"document\">\n    <div class=\"card text-center\">\n      <div class=\"card-header\">\n        <div class=\"category\">\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <div class=\"btn-group\" role=\"group\" v-for=\"(label, idx) in available_labels\" :key=\"label\">\n                    <!-- <button v-if=\"value == false\" class=\"btn btn-secondary\" type=\"button\" @click=\"changeValue(label, 'themes', labels.id)\">{{label}} </button>\n                    <button v-if=\"value == true\" class=\"btn btn-primary\" type=\"button\" @click=\"showSpans(label, 'themes', labels.id)\">{{label}} </button>\n                    <button v-if=\"value == true\" class=\"btn btn-warning\" type=\"button\" @click=\"changeValue(label, 'themes', labels.id)\">&#10008;</button>\n                    <button v-if=\"value == true\" class=\"btn btn-warning\" type=\"button\" @click=\"linkTexttoLabel(label, 'themes', labels.id)\">&#10078;</button> -->\n                    <button v-if=\"labels.includes(available_label_ids[idx])\" class=\"btn btn-primary\" type=\"button\" @click=\"changelabel(available_label_ids[idx])\"> {{label}} </button>\n                    <button v-else class=\"btn btn-secondary\" type=\"button\" @click=\"changelabel(available_label_ids[idx])\"> {{label}} </button>\n              </div>\n            </div>\n            <!-- <div class=\"col-2\">\n              <form class=\"form-inline\">\n                <input type=\"text\" id=\"themes-new\" class=\"form-control search\" placeholder=\"new label\" @keyup.enter=\"addlabel('themes-new')\">\n              </form>\n            </div> -->\n          </div>\n        </div>\n      </div>\n      <div class=\"card-body\" id='document_text'>\n        <p class=\"card-text overflowAuto\">\n          <pre>{{document_text}}</pre>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/*eslint-disable*/\n\nimport axios from 'axios';\nimport rangy from 'rangy';\nimport $ from 'jquery';\nimport { EventBus } from \"../main.js\";\n\nexport default {\n  name: 'Document',\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      project_id: Number,\n      available_labels: [],\n      available_label_ids: [],\n      document_text: '',\n      labels: [],\n      spans: {},\n      spanvalues: [],\n      currentidx: Number, // this is current document_idx\n      root_api: process.env.VUE_APP_URL,\n    };\n  },\n  methods: {\n    \n    retrieveAnnotatedDocument(idx) {\n      const ann_document_pathpath = 'http://' + this.root_api + ':5001/getAnnotatedDocument';\n      axios.post(ann_document_pathpath, {'document_id': idx}, {headers: {'Authorization': localStorage.getItem('jwt')}})\n        .then((res) => {\n          this.labels = res.data.label_ids;\n          console.log('retrieve annotated document', idx)\n        })\n        .catch((error) => {\n          console.error(error);\n        });   \n    },\n\n    loadProject(project_id) {\n      const path = 'http://' + this.root_api + ':5001/getProject';\n      axios.post(path, {'project_id': project_id}, {headers: {'Authorization': localStorage.getItem('jwt')}})\n        .then((res) => {\n          this.available_labels = res.data.available_labels;\n          this.available_label_ids = res.data.available_label_ids;\n          console.log('loaded available labels')\n        })\n        .catch((error) => {\n          console.error(error);\n        });      \n    },\n\n    getnextdocument(newIdx) {\n      const document_path = 'http://' + this.root_api + ':5001/getDocument';\n      axios.post(document_path, {'document_id': newIdx}, {headers: {'Authorization': localStorage.getItem('jwt')}})\n        .then((res) => {\n          this.document_text = res.data.document_text;\n          // this.document_text = this.document_text.replace(new RegExp('\\r?\\n','g'), '<br/>');\n          this.retrieveAnnotatedDocument(newIdx);\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n\n    },\n\n    changelabel(label_id) {\n      const path = 'http://' + this.root_api + ':5001/changelabel';\n\n      axios.post(path, { 'label_id': label_id, 'document_id': this.currentidx, 'project_id': this.project_id},\n                        {headers: {'Authorization': localStorage.getItem('jwt')}})\n        .then((res) => {\n          EventBus.$emit(\"label-added\", this.currentidx);\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n\n  },\n\n  created() {\n    this.project_id = 1; // replace this with a call to the api!\n    this.currentidx = 1; // risky..the starting coder might not be set up\n    console.log('Document loaded with cid: ', this.currentidx);\n\n    this.loadProject(this.project_id); // this gives us the available labels\n    this.getnextdocument(1);\n\n    // Event listener for previous and next document\n    window.addEventListener('keydown', (e) => {\n      if (e.key == 'y') {\n        this.changelabel(2);\n      }\n      if (e.key == 'n') {\n        this.changelabel(1);\n      }\n    });\n\n    EventBus.$on(\"number-added\", newIdx => {\n      this.currentidx = newIdx;\n      this.getnextdocument(newIdx);\n      \n    });\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ninput {\n  margin: 3px;\n}\nh3 {\n  margin: 0px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.category {\n  text-align: left;\n  margin-top: 15px;\n}\n.overflowAuto {\n  overflow-y: auto;\n  height: 75vh;\n  word-wrap: break-word;\n}\n.document {\n  margin: 15px;\n}\n.btn-group {\n  margin: 5px;\n}\ndiv.boxwrap div {\n  float: left;\n}\ndiv.boxwrap div:hover {\n  background-color: aqua;\n  cursor: pointer;\n}\ndiv.boxwrap div h5 {\n  text-align: center;\n}\npre {\n  white-space: pre-wrap;\n  word-break: keep-all\n}\n</style>\n"]}]}